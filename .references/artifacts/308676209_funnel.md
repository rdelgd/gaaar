# Servco Toyota Lead Funnels - spec

--project "servco-ga-prod"
--dataset "analytics_308676209"

We need to write BigQuery SQL to create two lead funnels for New vs. Returning users. We will need to use New and Returning User Scoped dimensions for each funnel. 

## Here's what we need: 

- One funnel should measure dropoff between users who start a sessions on the home page "/" 
- The next funnel should measure dropoff for users who start sessions on the new and used VDP pages, "/express/" or "/express/used" respectively. 

## Here's some more specific GA4 funnel logic: 

New VDP page funnel: 

step_1: 
event name EXACTLY MATCHES "session_start" 
AND
Page path + query string EXACTLY MATCHES "/"

step_2:
Page path + query string CONTAINS "/express/"
AND
Page path + query string DOES NOT CONTAIN "/express/used"

step_3:
event action EXACTLY MATCHES "R-purchase-placed"
OR
event action EXACTLY MATCHES "R-saved-express-car"
OR
event action EXACTLY MATCHES "R-trade-estimate"
OR
event action EXACTLY MATCHES "R-test-drive"
OR
event action EXACTLY MATCHES "R-general-inquiry"


Used VDP page funnel: 

step_1: 
event name EXACTLY MATCHES "session_start" 
AND
Page path + query string EXACTLY MATCHES "/"

step_2:
Page path + query string CONTAINS "/express/"
AND
Page path + query string DOES NOT CONTAIN "/express/used"

step_3:
event action EXACTLY MATCHES "R-purchase-placed"
OR
event action EXACTLY MATCHES "R-saved-express-car"
OR
event action EXACTLY MATCHES "R-trade-estimate"
OR
event action EXACTLY MATCHES "R-test-drive"
OR
event action EXACTLY MATCHES "R-general-inquiry"
