# Servco Toyota Lead Funnels - spec

--project "servco-ga-prod"
--dataset "analytics_308676209"

We need to write BigQuery SQL to create two lead funnels for New vs. Returning users. We will need to use New and Returning User Scoped dimensions for each funnel as well as the dimensions or event parameter values described in step_1 and step_2 of each funnel.

## Here's what we need: 

- The funnels should measure dropoff for new or returning users who complete step_1 (Viewed VDP) start sessions on the new and used VDP pages, "/express/" or "/express/used" respectively, then complete a step_2 (lead event). 

## Here's some more specific GA4 funnel logic: 

## New VDP page funnel: 

step_1:
User: New || Returning
Page path + query string CONTAINS "/express/"
AND
Page path + query string DOES NOT CONTAIN "/express/used"

step_2:
event action EXACTLY MATCHES "R-purchase-placed"
OR
event action EXACTLY MATCHES "R-saved-express-car"
OR
event action EXACTLY MATCHES "R-trade-estimate"
OR
event action EXACTLY MATCHES "R-test-drive"
OR
event action EXACTLY MATCHES "R-general-inquiry"


## Used VDP page funnel: 

step_1:

User: New || Returning
Page path + query string CONTAINS "/express/used"

step_2:
event action EXACTLY MATCHES "R-purchase-placed"
OR
event action EXACTLY MATCHES "R-saved-express-car"
OR
event action EXACTLY MATCHES "R-trade-estimate"
OR
event action EXACTLY MATCHES "R-test-drive"
OR
event action EXACTLY MATCHES "R-general-inquiry"
